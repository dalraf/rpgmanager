<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG Manager</title>
    <link rel="icon" href="icon.png" type="image/icon type">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <link rel="manifest" href="./manifest.json">
    <style>
        .slider-output {
            font-weight: bold;
            display: inline-block;
            width: 30px;
            text-align: right;
        }
        .section-header {
            margin-bottom: 1.5rem;
            padding: 1rem;
            border-radius: 4px;
        }
    </style>
</head>

<body onload="brython({debug: 1, indexedDB: false})">
    <section class="section">
        <div class="container">
            <h1 class="title has-text-centered is-2">Gerenciador de Personagem</h1>
            
            <div class="columns is-multiline">
                
                <!-- Coluna Esquerda: Dados Principais -->
                <div class="column is-half">
                    <div class="box">
                        <div class="has-background-grey-lighter section-header">
                            <h2 class="subtitle is-5"><b><i class="fas fa-user"></i> DADOS DO PERSONAGEM</b></h2>
                        </div>

                        <div class="field is-horizontal">
                            <div class="field-label is-normal">
                                <label class="label">Nome</label>
                            </div>
                            <div class="field-body">
                                <div class="field">
                                    <div class="control">
                                        <input type="text" name="nome" id="nome" class="input" placeholder="Nome do personagem">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="field is-horizontal">
                            <div class="field-label is-normal">
                                <label class="label">Raça</label>
                            </div>
                            <div class="field-body">
                                <div class="field">
                                    <div class="control">
                                        <input type="text" name="raca" id="raca" class="input" placeholder="Raça do personagem">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="field">
                            <label class="label">Descrição</label>
                            <div class="control">
                                <textarea id="descricao" class="textarea" placeholder="Descrição e histórico do personagem"></textarea>
                            </div>
                        </div>

                        <hr>

                        <div class="field">
                            <label class="label">Nível <span id="nivelout" class="tag is-info ml-2">1</span></label>
                            <div class="control">
                                <input id="nivel" class="slider is-fullwidth is-info" step="1" min="1" max="15" value="1" type="range">
                            </div>
                        </div>

                        <div class="field">
                            <label class="label">HP <span id="hpout" class="tag is-danger ml-2">50</span></label>
                            <div class="control">
                                <input id="hp" class="slider is-fullwidth is-danger" step="1" min="1" max="50" value="50" type="range">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coluna Direita: Atributos e Rolagem -->
                <div class="column is-half">
                    
                    <!-- Rolagem de Dados -->
                    <div class="box has-background-info-light">
                        <h2 class="subtitle is-5"><b><i class="fas fa-dice-d20"></i> ROLAR TESTE</b></h2>
                        <div class="field has-addons">
                            <div class="control is-expanded">
                                <div class="select is-fullwidth">
                                    <select id='caracter'>
                                        <option>Inteligência</option>
                                        <option>Força</option>
                                        <option>Destreza</option>
                                        <option>Carisma</option>
                                        <option>Constituição</option>
                                    </select>
                                </div>
                            </div>
                            <div class="control">
                                <button id="rolar" class="button is-info">
                                    <span class="icon">
                                        <i class="fas fa-dice"></i>
                                    </span>
                                    <span>Rolar</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Distribuição de Pontos -->
                    <div class="box">
                        <div class="level mobile-level">
                            <div class="level-left">
                                <div class="level-item">
                                    <h2 class="subtitle is-5"><b>ATRIBUTOS</b></h2>
                                </div>
                            </div>
                            <div class="level-right">
                                <div class="level-item">
                                    <span id='somapontos' class="tag is-medium">Calculando...</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Loop de sliders de atributos -->
                        <div class="field">
                            <label class="label">Inteligência <span id="inteligenciaout" class="slider-output">8</span></label>
                            <input id="inteligencia" class="slider is-fullwidth is-circle" step="1" min="6" max="15" value="8" type="range">
                        </div>
                        <div class="field">
                            <label class="label">Força <span id="forcaout" class="slider-output">8</span></label>
                            <input id="forca" class="slider is-fullwidth is-circle" step="1" min="6" max="15" value="8" type="range">
                        </div>
                        <div class="field">
                            <label class="label">Destreza <span id="destrezaout" class="slider-output">8</span></label>
                            <input id="destreza" class="slider is-fullwidth is-circle" step="1" min="6" max="15" value="8" type="range">
                        </div>
                        <div class="field">
                            <label class="label">Carisma <span id="carismaout" class="slider-output">8</span></label>
                            <input id="carisma" class="slider is-fullwidth is-circle" step="1" min="6" max="15" value="8" type="range">
                        </div>
                        <div class="field">
                            <label class="label">Constituição <span id="constituicaoout" class="slider-output">8</span></label>
                            <input id="constituicao" class="slider is-fullwidth is-circle" step="1" min="6" max="15" value="8" type="range">
                        </div>
                    </div>
                </div>

                <!-- Seção Inferior: Armas -->
                <div class="column is-full">
                    <div class="box">
                        <div class="has-background-grey-lighter section-header">
                            <h2 class="subtitle is-5"><b><i class="fas fa-fist-raised"></i> ARMAS E EQUIPAMENTOS</b></h2>
                        </div>
                        
                        <div class="columns is-vcentered">
                            <div class="column is-5">
                                <div class="field">
                                    <label class="label">Nome da Arma</label>
                                    <div class="control">
                                        <input type="text" id="armanome" class="input" placeholder="Ex: Espada Longa">
                                    </div>
                                </div>
                            </div>
                            <div class="column is-5">
                                <div class="field">
                                    <label class="label">Dano/Defesa: <span id="armadanoout">1</span></label>
                                    <div class="control">
                                        <input id="armadano" class="slider is-fullwidth is-danger" step="1" min="1" max="15" value="1" type="range">
                                    </div>
                                </div>
                            </div>
                            <div class="column is-2">
                                <label class="label">&nbsp;</label>
                                <button id="addarma" class="button is-primary is-fullwidth">
                                    <span class="icon"><i class="fas fa-plus"></i></span>
                                    <span>Adicionar</span>
                                </button>
                            </div>
                        </div>

                        <table class="table is-striped is-hoverable is-fullwidth">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Poder (Dano/Defesa)</th>
                                    <th style="width: 100px;">Ações</th>
                                </tr>
                            </thead>
                            <tbody id="listaarmas">
                                <!-- Preenchido via Python -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Botões de Ação -->
                <div class="column is-full">
                    <div class="buttons is-right">
                        <button id="deletar" class="button is-danger is-outlined">
                            <span class="icon"><i class="fas fa-trash-alt"></i></span>
                            <span>Apagar Personagem</span>
                        </button>
                        <button id="salvar" class="button is-success is-large">
                            <span class="icon"><i class="fas fa-save"></i></span>
                            <span>Salvar Ficha</span>
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script type="text/python">
        import functions
    </script>
    <script src="brython.js"></script>
    <script src="brython_stdlib.js"></script>
</body>

</html>